webpackJsonp([1],{"+HYy":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-navigation-drawer",{attrs:{temporary:"",light:"",overflow:"",absolute:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",[n("v-list-tile",{attrs:{to:"/home"}},[n("v-list-tile-content",[t._v("Home")])],1),t._v(" "),n("v-list-tile",{attrs:{to:"/login"}},[n("v-list-tile-content",[t._v("Login")])],1),t._v(" "),n("v-list-tile",{attrs:{to:"/register"}},[n("v-list-tile-content",[t._v("Register")])],1)],1)],1),t._v(" "),n("v-toolbar",{attrs:{absolute:""}},[n("v-toolbar-side-icon",{staticClass:"hidden-md-and-up",on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),n("router-link",{attrs:{id:"title",to:"/home"}},[n("v-toolbar-title",{attrs:{href:"/home"}},[t._v("Booktrader")])],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:"",to:"/home"}},[t._v("Home")]),t._v(" "),t.loggedIn?t._e():n("v-btn",{attrs:{flat:"",to:"/login"}},[t._v("Login")]),t._v(" "),t.loggedIn?n("v-btn",{attrs:{flat:"",to:"/profile"}},[t._v("Profile")]):t._e(),t._v(" "),t.loggedIn?n("v-btn",{attrs:{flat:""},nativeOn:{click:function(e){t.onLogout(e)}}},[t._v("Logout")]):t._e(),t._v(" "),t.loggedIn?t._e():n("v-btn",{attrs:{flat:"",to:"/register"}},[t._v("Register")])],1)],1)],1)},s=[],a={render:r,staticRenderFns:s};e.a=a},"/Idh":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm6:""}},[n("h2",[t._v("My books")]),t._v(" "),t.books.length?n("v-list",t._l(t.books,function(e,r){return n("v-list-tile",{key:e.id,staticClass:"tile",attrs:{avatar:""}},[n("v-list-tile-avatar",[n("a",{attrs:{href:e.previewLink,target:"_blank"}},[n("img",{attrs:{src:e.imageLink}})])]),t._v(" "),n("v-list-tile-content",[e.author?n("v-list-tile-title",[n("a",{attrs:{href:e.previewLink,target:"_blank"}},[t._v("\n                "+t._s(e.title)+" ("+t._s(e.author)+")\n                ")])]):n("v-list-tile-title",[n("a",{attrs:{href:e.previewLink,target:"_blank"}},[t._v("\n                "+t._s(e.title)+" (unknown)\n                ")])])],1),t._v(" "),n("v-list-tile-action",{on:{click:function(n){t.removeBook(e,r)}}},[n("v-icon",{staticClass:"add-icon red--text"},[t._v("remove_circle")])],1)],1)})):t._e()],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("h2",[t._v("Add a book")]),t._v(" "),t.searchPending?t._e():n("form",{on:{submit:function(e){e.preventDefault(),t.onSubmit(e)}}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[n("v-text-field",{attrs:{name:"searchTerm",label:"Search the library",required:""},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),t._v(" "),n("v-btn",{attrs:{type:"submit",primary:"",disabled:!t.formIsValid}},[t._v("Submit")])],1)],1)],1),t._v(" "),!t.results.length&&t.searchPending?n("v-progress-circular",{staticClass:"primary--text",attrs:{indeterminate:"",size:50}}):t._e(),t._v(" "),t.results.length?n("v-list",{attrs:{subheader:""}},[n("v-subheader",[t._v("Search Results")]),t._v(" "),t._l(t.results,function(e){return n("v-list-tile",{key:e.id,staticClass:"tile",attrs:{avatar:""}},[n("v-list-tile-avatar",[n("a",{attrs:{href:e.previewLink,target:"_blank"}},[e.imageLinks?n("img",{attrs:{src:e.imageLinks.smallThumbnail}}):t._e()])]),t._v(" "),n("v-list-tile-content",[e.authors?n("v-list-tile-title",[n("a",{attrs:{href:e.previewLink,target:"_blank"}},[t._v("\n                "+t._s(e.title)+" ("+t._s(e.authors.join(", "))+")\n                ")])]):n("v-list-tile-title",[n("a",{attrs:{href:e.previewLink,target:"_blank"}},[t._v("\n                "+t._s(e.title)+" (unknown)\n                ")])])],1),t._v(" "),n("v-list-tile-action",{on:{click:function(n){t.addToMyBooks(e)}}},[n("v-icon",{staticClass:"add-icon blue--text"},[t._v("library_add")])],1)],1)})],2):t._e()],1)],1)],1)},s=[],a={render:r,staticRenderFns:s};e.a=a},0:function(t,e){},BBJI:function(t,e){},DcTe:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Home")])])}],a={render:r,staticRenderFns:s};e.a=a},Drc2:function(t,e,n){"use strict";var r=n("SGRL");e.a={data:function(){return{drawer:null}},computed:{loggedIn:function(){return this.$store.getters.auth}},methods:{onLogout:function(){r.a.logout(),this.$store.commit("logout"),this.$swal({title:"Info",text:"You are now logged out",type:"info",timer:1e3,showConfirmButton:!1}).catch(this.$swal.noop),this.$router.push("/home")}}}},Fs8J:function(t,e,n){"use strict";e.a={}},JJT7:function(t,e,n){"use strict";var r=n("SGRL"),s=n("olkN");e.a={beforeRouteEnter:function(t,e,n){s.a.getters.auth?n("/home"):n()},data:function(){return{username:"",email:"",password:"",confirmPassword:""}},computed:{formIsValid:function(){return""!==this.username&&""!==this.password&&""!==this.email&&this.password===this.confirmPassword}},methods:{onSubmit:function(){var t=this;r.a.register({username:this.username,email:this.email,password:this.password}).then(function(e){try{t.handleSuccess(e)}catch(n){t.handleRejection(n,e)}})},handleSuccess:function(t){if(!t.success)throw new Error("Failed to register");this.$swal({title:"Success",text:"Successfully registered, you can now login",type:"success",timer:1e3,showConfirmButton:!1}).then(function(){},function(t){this.$router.push("login")}.bind(this))},handleRejection:function(t,e){1===e.status&&(this.username=""),2===e.status&&(this.email=""),this.password="",this.confirmPassword="",this.$swal({title:"Error",text:e.msg,type:"error",timer:1e3,showConfirmButton:!1}).catch(this.$swal.noop)}}}},KnOo:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app"}},[n("navbar"),t._v(" "),n("main",[n("v-container",[n("router-view",{attrs:{id:"content-wrapper"}})],1)],1)],1)},s=[],a={render:r,staticRenderFns:s};e.a=a},LE9f:function(t,e){},M93x:function(t,e,n){"use strict";function r(t){n("uSq7")}var s=n("xJD8"),a=n("KnOo"),o=n("VU/8"),i=r,u=o(s.a,a.a,i,null,null);e.a=u.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),s=n("NYxO"),a=n("ORbq"),o=n("3EgV"),i=n.n(o),u=n("M93x"),l=n("YaEn"),c=n("olkN"),d=n("ao/4");n.e(0).then(n.bind(null,"7zck")),r.a.use(s.a),r.a.use(a.a),r.a.use(i.a),r.a.use(d.a),r.a.config.productionTip=!1,new r.a({el:"#app",store:c.a,router:l.a,template:"<App/>",components:{App:u.a}})},QmSG:function(t,e,n){"use strict";e.a={serverAddress:"http://localhost:8080"}},SGRL:function(t,e,n){"use strict";var r=n("7+uW"),s=n("QmSG"),a=s.a.serverAddress;e.a={login:function(t){return r.a.http.post(a+"/api/login",{username:t.username,password:t.password}).then(o,i)},register:function(t){return r.a.http.post(a+"/api/register",{username:t.username,email:t.email,password:t.password}).then(o,i)},logout:function(){localStorage.clear()},loggedIn:function(){return!!localStorage.getItem("user")}};var o=function(t){return t.json()},i=function(t){return console.log(t)}},"V/3R":function(t,e,n){"use strict";var r=n("7+uW"),s=n("QmSG"),a=s.a.serverAddress;e.a={searchBook:function(t){return r.a.http.post(a+"/api/searchBook",{searchTerm:t}).then(o,i)},addBook:function(t,e,n,s,u){return r.a.http.post(a+"/api/addBook",{title:t,author:e,userId:n,previewLink:s,imageLink:u}).then(o,i)},getBooksByUser:function(t){return r.a.http.get(a+"/api/books/"+t).then(o,i)},deleteBook:function(t){return r.a.http.delete(a+"/api/book/"+t).then(o,i)}};var o=function(t){return t.json()},i=function(t){return console.log(t)}},WkmR:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("form",{on:{submit:function(e){e.preventDefault(),t.onSubmit(e)}}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[n("v-text-field",{attrs:{name:"username",label:"Enter Username",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),n("v-text-field",{attrs:{name:"email",label:"Enter Email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),n("v-text-field",{attrs:{name:"password",label:"Enter Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("v-text-field",{attrs:{name:"confirmPassword",label:"Confirm Password",type:"password",required:""},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),t._v(" "),n("v-btn",{attrs:{type:"submit",primary:"",disabled:!t.formIsValid}},[t._v("Submit")])],1)],1)],1)])],1)],1)},s=[],a={render:r,staticRenderFns:s};e.a=a},XDci:function(t,e){},YaEn:function(t,e,n){"use strict";var r=n("7+uW"),s=n("/ocq"),a=n("lO7g"),o=n("dIqY"),i=n("xJsL"),u=n("o9cx");r.a.use(s.a),e.a=new s.a({mode:"history",routes:[{path:"/",name:"Home",component:a.a},{path:"/home",redirect:{name:"Home"}},{path:"/register",name:"Register",component:o.a},{path:"/login",name:"Login",component:i.a},{path:"/profile",name:"Profile",component:u.a}]})},"ao/4":function(t,e,n){"use strict";var r=n("PBfN"),s=n.n(r);n("x36W");var a={};a.install=function(t){t.prototype.$swal=s.a},e.a=a},dIqY:function(t,e,n){"use strict";function r(t){n("LE9f")}var s=n("JJT7"),a=n("WkmR"),o=n("VU/8"),i=r,u=o(s.a,a.a,i,null,null);e.a=u.exports},hPl9:function(t,e){},l0zJ:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("form",{on:{submit:function(e){e.preventDefault(),t.onSubmit(e)}}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[n("v-text-field",{attrs:{name:"username",label:"Enter Username",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),n("v-text-field",{attrs:{name:"password",label:"Enter Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("v-btn",{attrs:{type:"submit",primary:"",disabled:!t.formIsValid}},[t._v("Submit")])],1)],1)],1)])],1)],1)},s=[],a={render:r,staticRenderFns:s};e.a=a},lO7g:function(t,e,n){"use strict";function r(t){n("hPl9")}var s=n("Fs8J"),a=n("DcTe"),o=n("VU/8"),i=r,u=o(s.a,a.a,i,null,null);e.a=u.exports},lfLh:function(t,e,n){"use strict";function r(t){n("XDci")}var s=n("Drc2"),a=n("+HYy"),o=n("VU/8"),i=r,u=o(s.a,a.a,i,"data-v-455081ce",null);e.a=u.exports},"nKb+":function(t,e,n){"use strict";var r=n("mvHQ"),s=n.n(r),a=n("SGRL"),o=n("olkN");e.a={beforeRouteEnter:function(t,e,n){o.a.getters.auth?n("/home"):n()},data:function(){return{username:"",password:""}},computed:{formIsValid:function(){return""!==this.username&&""!==this.password}},methods:{onSubmit:function(){var t=this;a.a.login({username:this.username,password:this.password}).then(function(e){try{t.handleSuccess(e)}catch(n){t.handleRejection(n,e)}})},handleSuccess:function(t){localStorage.setItem("user",s()(t.user));var e=JSON.parse(localStorage.getItem("user"));this.$store.commit("login"),this.$store.dispatch("setUserId",e.id),this.$swal({title:"Success",text:"Successfully logged in, you are now being redirected",type:"success",timer:1e3,showConfirmButton:!1}).then(function(){},function(t){this.$router.push("home")}.bind(this))},handleRejection:function(t,e){1===e.status&&(this.username=""),this.password="",this.$swal({title:"Error",text:e.msg,type:"error",timer:1e3,showConfirmButton:!1}).catch(this.$swal.noop)}}}},o9cx:function(t,e,n){"use strict";function r(t){n("BBJI")}var s=n("yoF/"),a=n("/Idh"),o=n("VU/8"),i=r,u=o(s.a,a.a,i,"data-v-0e2b2d4a",null);e.a=u.exports},olkN:function(t,e,n){"use strict";var r=n("7+uW"),s=n("NYxO"),a=n("SGRL"),o=JSON.parse(localStorage.getItem("user"))||null,i=o?o.id:null;r.a.use(s.a);var u={authenticated:a.a.loggedIn(),userId:i},l={login:function(t){return t.authenticated=!0},logout:function(t){return t.authenticated=!1},setUserId:function(t,e){return t.userId=e}},c={auth:function(t){return t.authenticated},user:function(t){return t.userId}},d={setUserId:function(t,e){(0,t.commit)("setUserId",e)}};e.a=new s.a.Store({state:u,getters:c,mutations:l,actions:d})},rgRx:function(t,e){},uSq7:function(t,e){},x36W:function(t,e){},xJD8:function(t,e,n){"use strict";var r=n("lfLh");e.a={name:"app",components:{navbar:r.a}}},xJsL:function(t,e,n){"use strict";function r(t){n("rgRx")}var s=n("nKb+"),a=n("l0zJ"),o=n("VU/8"),i=r,u=o(s.a,a.a,i,null,null);e.a=u.exports},"yoF/":function(t,e,n){"use strict";var r=n("olkN"),s=n("V/3R");e.a={beforeRouteEnter:function(t,e,n){r.a.getters.auth?n():n("/login")},created:function(){var t=this;s.a.getBooksByUser(this.$store.getters.user).then(function(e){try{var n=e.books;t.books=n}catch(t){console.log(t)}})},data:function(){return{searchTerm:"",results:[],books:[],searchPending:!1}},computed:{formIsValid:function(){return""!==this.searchTerm.trim()}},methods:{removeBook:function(t,e){this.books.splice(e,1),s.a.deleteBook(t.id)},addToMyBooks:function(t){var e=this;this.books.push({author:t.authors?t.authors.join(", "):"unknown",title:t.title,previewLink:t.previewLink,imageLink:t.imageLinks.smallThumbnail}),s.a.addBook(t.title,t.authors,this.$store.getters.user,t.previewLink,t.imageLinks.smallThumbnail).then(function(t){try{e.onAddSuccess(t)}catch(n){e.onAddError(n,t)}})},onAddSuccess:function(t){},onAddError:function(t,e){console.log(t,e)},onSubmit:function(){var t=this;this.results=[],this.searchPending=!0,s.a.searchBook(this.searchTerm).then(function(e){try{t.onSubmitSuccess(e)}catch(n){t.onSubmitError(n,e)}})},onSubmitSuccess:function(t){var e=this;this.searchPending=!1,t.info.forEach(function(t){t.volumeInfo.id=t.id,e.results.push(t.volumeInfo)})},onSubmitError:function(t,e){console.log(t,e)}}}}},["NHnr"]);
//# sourceMappingURL=app.c4ebdf991c49ca8e1c81.js.map